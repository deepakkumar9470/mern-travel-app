{"version":3,"sources":["components/Login/Login.jsx","components/Register/Register.jsx","App.js","index.js"],"names":["Login","setShowLogin","myStorage","setCurrentUser","useState","error","setError","nameRef","useRef","passwordRef","handleSubmit","e","a","preventDefault","newUser","username","current","value","password","axios","post","res","setItem","data","className","Room","onSubmit","type","placeholder","ref","Cancel","onClick","Register","setShowRegister","success","setSuccess","emailRef","email","App","window","localStorage","width","height","latitude","longitude","zoom","viewport","setViewport","getItem","currentUser","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","star","setStar","showRegister","showLogin","useEffect","get","console","log","getPins","handlePlaceSubmit","newPin","rating","lat","long","mapboxApiAccessToken","process","onViewportChange","nextViewport","mapStyle","onDblClick","lngLat","transitionDuration","map","p","offsetLeft","offsetTop","style","fontSize","color","cursor","id","_id","closeButton","closeOnClick","onClose","anchor","Array","fill","Star","format","createdAt","autoFocus","onChange","target","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c5745de4.chunk.js","sourcesContent":["import React,{useState,useRef} from 'react'\r\nimport './Login.css'\r\nimport {Room,Cancel} from '@material-ui/icons';\r\nimport axios from 'axios'\r\n\r\nconst url = 'https://mern-travel-app.cyclic.app/api'\r\n\r\nconst Login = ({setShowLogin,myStorage,setCurrentUser}) => {\r\n    \r\n    const [error,setError] = useState(false)\r\n    const nameRef = useRef()\r\n    const passwordRef = useRef()\r\n\r\n    const handleSubmit = async (e) =>{\r\n        e.preventDefault() \r\n        const newUser = {\r\n            username : nameRef.current.value,\r\n            password : passwordRef.current.value,    \r\n        };\r\n       try {\r\n            const res = await axios.post(`${url}/users/login`,newUser)\r\n            myStorage.setItem(\"user\", res.data.username)\r\n            setCurrentUser(res.data.username)\r\n            setShowLogin(false)\r\n            setError(false)\r\n            \r\n       } catch (error) {\r\n           \r\n           setError(true)\r\n       }\r\n\r\n    };\r\n    return (\r\n        <div className=\"loginContainer\">\r\n            <div className=\"logo\">\r\n                <Room/>\r\n                DkPin\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n\r\n                <input type=\"text\"  placeholder=\"Enter your username\" ref={nameRef} /> \r\n                <input type=\"password\" placeholder=\"password\" ref={passwordRef}/>   \r\n                <button className=\"loginBtn\">Login</button>\r\n               \r\n                {error && \r\n                (<span className=\"failure\">Something went wrong!</span>)}\r\n            </form> \r\n            \r\n            <Cancel className=\"loginCancel\" onClick={()=> setShowLogin(false)}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React,{useState,useRef} from 'react'\r\nimport './Register.css'\r\nimport {Room, Cancel} from '@material-ui/icons';\r\nimport axios from 'axios'\r\n\r\nconst url = 'https://mern-travel-app.cyclic.app/api'\r\n\r\nconst Register = ({setShowRegister}) => {\r\n    const [success,setSuccess] = useState(false)\r\n    const [error,setError] = useState(false)\r\n    const nameRef = useRef()\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n\r\n\r\n    const handleSubmit = async (e) =>{\r\n        e.preventDefault() \r\n        const newUser = {\r\n            username : nameRef.current.value,\r\n            email : emailRef.current.value,\r\n            password : passwordRef.current.value,    \r\n        };\r\n       try {\r\n            await axios.post(`${url}/users/register`,newUser)\r\n            setError(false)\r\n            setSuccess(true)\r\n       } catch (error) {\r\n           \r\n           setError(true)\r\n       }\r\n\r\n    };\r\n\r\n    return (\r\n        <div className=\"registerContainer\">\r\n            <div className=\"logo\">\r\n                <Room/>\r\n                DkPin\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <input type=\"text\"  placeholder=\"Enter your username\"  ref={nameRef}/> \r\n                <input type=\"email\"  placeholder=\"Enter your email\"  ref={emailRef}/>\r\n                <input type=\"password\" placeholder=\"password\" ref={passwordRef}/>   \r\n                <button className=\"registerBtn\">Signup</button>\r\n                {success && \r\n                 (<span className=\"success\">Successful.You can login now</span>)}\r\n                \r\n                {error && \r\n                (<span className=\"failure\">Something went wrong!</span>)}\r\n            </form> \r\n            \r\n            <Cancel className=\"registerCancel\" onClick={()=>setShowRegister(false)}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register\r\n","import React,{useState,useEffect} from 'react'\r\nimport './App.css';\r\nimport ReactMapGL,{Marker,Popup} from 'react-map-gl';\r\nimport Login from './components/Login/Login'\r\nimport Register from './components/Register/Register'\r\nimport {Room,Star} from '@material-ui/icons';\r\nimport axios from 'axios'\r\nimport { format } from 'timeago.js';\r\n\r\nconst url = 'https://mern-travel-app.cyclic.app/api'\r\n\r\nfunction App() {\r\n\r\n  const myStorage = window.localStorage; \r\n  const [viewport, setViewport] = useState({\r\n    width: '100vw',\r\n    height: '100vh',\r\n    latitude: 21.7679,\r\n    longitude: 78.8718,\r\n    zoom: 4\r\n  });\r\n\r\n  const [currentUser,setCurrentUser] = useState(myStorage.getItem(\"user\"));\r\n  const [pins , setPins] = useState([]);\r\n  const [currentPlaceId , setCurrentPlaceId] = useState(null);\r\n  const [newPlace , setNewPlace] = useState(null);\r\n  const [title,setTitle] = useState(null);\r\n  const [desc,setDesc] = useState(null);\r\n  const [star, setStar] = useState(0);\r\n  const[showRegister,setShowRegister] = useState(false);\r\n  const[showLogin,setShowLogin] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n      const getPins = async () =>{\r\n          try{\r\n            const res = await axios.get(`${url}/pins`);\r\n            console.log(res) \r\n            setPins(res.data)  \r\n          }catch(err){\r\n             console.log(err)\r\n          }\r\n      }\r\n      getPins()\r\n  }, [])\r\n\r\n  const handleClick = (id,lat,long) =>{\r\n    setCurrentPlaceId(id)\r\n    setViewport({...viewport , latitude:lat, longitude:long})\r\n  };\r\n\r\n  const handleAddPlace = (e) =>{\r\n    const [long,lat] = e.lngLat\r\n\r\n    console.log(e)\r\n    setNewPlace({\r\n      lat,long\r\n    })\r\n    \r\n  };\r\n\r\n  const handlePlaceSubmit = async (e) =>{\r\n     e.preventDefault()\r\n     const newPin = {\r\n       username : currentUser,\r\n       title,\r\n       desc,\r\n       rating : star,\r\n       lat : newPlace.lat,\r\n       long : newPlace.long,\r\n     }\r\n     try{\r\n         const res = await axios.post('/pins',newPin);\r\n         setPins([...pins, res.data])\r\n         setNewPlace(null)\r\n     }catch(err){\r\n       console.log(err)\r\n     }\r\n  };\r\n\r\n  const handleLogout = () =>{\r\n    myStorage.removeItem(\"user\");\r\n    setCurrentUser(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n         <ReactMapGL {...viewport}\r\n            mapboxApiAccessToken = {process.env.REACT_APP_MAPBOX}\r\n            onViewportChange={nextViewport => setViewport(nextViewport)}\r\n            mapStyle = 'mapbox://styles/dkmap397787/ckswt1nbw55ml18o277cfsfh2'\r\n            onDblClick={handleAddPlace}\r\n            transitionDuration = '200' >\r\n            \r\n           \r\n            {\r\n               pins.map(p => (\r\n                <>\r\n                  <Marker \r\n                  key={p._id}\r\n                    latitude ={p.lat} \r\n                    longitude={p.long} \r\n                    offsetLeft={-viewport.zoom * 3.5} \r\n                    offsetTop={-viewport.zoom * 7}>\r\n                   <Room style={{fontSize : viewport.zoom * 7,color: p.username === currentUser ? '#ff5e57': '#0984e3', cursor:'pointer' }}\r\n                   onClick={() => handleClick(p._id, p.lat,p.long)}/>\r\n                  </Marker>\r\n\r\n                { \r\n                  p._id === currentPlaceId && \r\n                  \r\n                  <Popup\r\n                      latitude={p.lat}\r\n                      longitude={p.long}\r\n                      closeButton={true}\r\n                      closeOnClick={false}\r\n                      onClose={() => setCurrentPlaceId(null)}\r\n                      anchor=\"left\" >\r\n                      <div className=\"card\">\r\n                        <label>Place</label>\r\n                        <h4 className=\"place\">{p.title}</h4>\r\n                        <label>Review</label>\r\n                        <p className=\"desc\">{p.desc}</p>\r\n                        <label>Rating</label>\r\n                        <div className=\"stars\">\r\n                        {Array(p.rating).fill(<Star className=\"star\" />)}\r\n                        </div>\r\n                        <label>Information</label>\r\n                        <span className=\"username\">Created by <b>{p.username}</b></span>\r\n                        <span className=\"date\">{format(p.createdAt)}</span>\r\n                      </div>\r\n                  </Popup>\r\n                  \r\n                }\r\n\r\n\r\n                </>\r\n              ))\r\n            }\r\n\r\n\r\n              {\r\n                 newPlace && (\r\n                <>\r\n                  <Marker\r\n                     latitude={newPlace.lat}\r\n                     longitude={newPlace.long}\r\n                     offsetLeft={-3.5 * viewport.zoom}\r\n                     offsetTop={-7 * viewport.zoom}\r\n                    >\r\n                  <Room\r\n                    style={{fontSize: 7 * viewport.zoom,color: \"tomato\",cursor: \"pointer\"}}\r\n                   />\r\n                      </Marker>\r\n                   \r\n                      <Popup\r\n              latitude={newPlace.lat}\r\n              longitude={newPlace.long}\r\n              closeButton={true}\r\n              closeOnClick={false}\r\n              onClose={() => setNewPlace(null)}\r\n              anchor=\"left\"\r\n            >\r\n              <div>\r\n                <form onSubmit={handlePlaceSubmit}>\r\n                  <label>Title</label>\r\n                  <input\r\n                    placeholder=\"Enter a title\"\r\n                    autoFocus\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                  />\r\n                  <label>Description</label>\r\n                  <textarea\r\n                    placeholder=\"Say us something about this place.\"\r\n                    onChange={(e) => setDesc(e.target.value)}\r\n                  />\r\n                  <label>Rating</label>\r\n                  <select onChange={(e) => setStar(e.target.value)}>\r\n                    <option value=\"1\">1</option>\r\n                    <option value=\"2\">2</option>\r\n                    <option value=\"3\">3</option>\r\n                    <option value=\"4\">4</option>\r\n                    <option value=\"5\">5</option>\r\n                  </select>\r\n                  <button type=\"submit\" className=\"submitButton\">\r\n                    Add Pin\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            </Popup>\r\n                  </>\r\n                )}\r\n            \r\n            {\r\n              currentUser ? (\r\n                 <button className=\"button logout\" onClick={handleLogout}>\r\n                    Logout\r\n                 </button>\r\n                 ) :\r\n               (\r\n                 <div className=\"buttons\">\r\n                   <button className=\"button login\" onClick={()=>setShowLogin(true)}>Login</button>\r\n                   <button className=\"button register\" onClick={()=>setShowRegister(true)}>Register</button>\r\n                 </div>\r\n               )\r\n            }\r\n             {showRegister && (<Register setShowRegister={setShowRegister}/>)}\r\n             {showLogin && (\r\n                <Login setShowLogin={setShowLogin} myStorage={myStorage} setCurrentUser={setCurrentUser}/>)}\r\n             \r\n\r\n         </ReactMapGL>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />,document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}